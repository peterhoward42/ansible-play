*  add ansible mc
*  give ansible mc a volume and mount repo onto it with hosts file
*  give the mcs better hostnames and scale service rather than c&p
*  do these nodes have ssh installed and configured = yes
*  update readme with new hostnames

o  try this one
	https://hub.docker.com/r/danielguerra/alpine-sshd/dockerfile/

	*  build and run it
	*  confirm that sshd is running
	*  confirm that the key created by entrypoint is there
	*  see what users are present = only human is root 
	*  checkpoint
	o  load my local public rsa key into the image
		*  have I got one, and it not server specific?
		*  where does daniel say it must go - /root/.ssh/authorized_keys
		*  what is there now? = nothing, no /root/.ssh dir
		o  here is a recipe to make it so
			o  https://stackoverflow.com/questions/51732269/how-to-pass-local-machines-ssh-key-to-docker-container
		*  transcribe here to go later in instructions
			o  you can inject info to the build process like this
			o  when you build the container add this to the cmd line:
				--build-arg SSH_KEY="$(cat ~/file/outside/build/context/id_rsa)"
			o  now to use in the dockerfile:
				ARG SSH_KEY
				ENV SSH_KEY=$SSH_KEY
				RUN mkdir /root/.ssh/
				RUN echo "$SSH_KEY" > /root/.ssh/id_rsa
				RUN chmod 600 /root/.ssh/id_rsa
		o  try it and make sure has arrived



			o  fart
			o  divert to use make for this to save all the slow typing
			   iteration
				*  inaugurate makefile
				*  target called managed-node-image
				*  target called managed-node-run
				*  sort out container name in use problem
				*  sort out container running
				*  use constant for managednode string = don't bother
				o  set build-arg from echo ssh do dah
					*  hard coded
					*  does it run?
					o  does it end up in servers /root/.ssh/auth...
						*  no, but the file exists
						*  setting build arg to "fibble" works ?
				o  improvment on hard coded?
				o  can we test this for mpt or not found?
		
			o  where to put error handling for no local rsa key?





			o  Add the dockerfile parts
				o  See what happens if you don't provide the SSH_KEY argument
				   at build time - hopefully complain...
					o  it does not complain :-( maybe it assumes the
					   the arg is mt string?
					o  update macos
					o  update docker
	o  why suggesting run it with run -p 4848:22 ?
	o  can I ssh into it now?
	o  can I inject the public key from an env var, rather than a file, or
	   an envvar that says what file to use?


	o  encouraging
		o  grok it fully before trying it
		o  should go for key based ssh
		o  need to also set up a container that holds your public key
		   in a volume, and mount that to daniels container at <run> time.
		   See https://github.com/danielguerra69/alpine-sshd
		o  then must tell your local ssh agent about that key pair - 
		   see also same web page info.
		o  then can run that image as is - telling it to mount the
		   volume with the public key in it from the first container
		o  we could instead prepare this key pair - and write it into
		   the container fs in the docker file if we wrap daniels no?
		o  consider making wrapper based on Dainel's
			o  noting that it provides a cmd and an entry point

o  try this one
	o  https://phoenixnap.com/kb/how-to-ssh-into-docker-container
		o  the install of sshserver works, but not booting it
		o  cannot run systemctl because system was not booted as an init system
		o  so try the makedir / chmod / explicit run way
		o  do I need to expose port 22
		o  do I need to setup user and password or keys?


o  timeout to upgrade the containers to have working ssh
        *  try https://forums.docker.com/t/ssh-from-one-containe-to-another-container/65906/8
        *  doesn't work :-(

		o  try basing on chusiang/ansible-managed-node
			o  std alone dockerfile
				*  does it build and run = yes
				*  switch to debian tag
				o  can I ssh into it?
			o  in compose
				o  can I ssh into it?
		o  note in readme account credentials
o  move control into same pattern

        o  try https://github.com/phusion/baseimage-docker#readme
            *  read again and note what will need to do
			o  not sure about this ... are there alternatives?
				o  how about https://hub.docker.com/r/chusiang/ansible-managed-node/
            o  work through it
                o  start with canonical case and see if it stays up 
				o  add enablish ssh section to docker file
				o  add bit that enables insecure ssh key to docker file
				o  should now be able to login using instructions
        o  clean up and document


o  add python3


o  start the tutorial
    o  attempt to get the nginx playbook to work, then document it,
        *  wait for ssh not being configured to bite so we have a use case to debug
        *  fix the hosts cited in the hosts and check the group name
        *  write the playbook, modified as per
        *  confirm that it becomes mounted alongside hosts file
        o  try running it from control node terminal
            o  bang! - hit the ssh blockage
                
        
    o  change hosts group name because it complains:
        o  Invalid characters were found in group names



o  things to note
    *  installing ssh tries to install and configure ssh server, including
               minting some keys (which are output to the console)
    *  this:
            openssl passwd -1 fibble
       outputs the md5 hash of fibble, (and presumably registers the pair?)
    *  $(stuff) evaluates the std out from stuff
    *  useradd .... usersname - edits /etc/passwd, makes a home dir for usersname etc
    *  the options used are
        *  -p md5-of-usersname-password
        *  --create-home
        *  --shell /bin/bash
        *  --groups sudo 
    *  /usr/sbin/sshd -D runs the ssh daemon - presumably more common to do so in background
